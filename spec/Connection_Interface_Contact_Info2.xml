<?xml version="1.0" ?>
<node name="/Connection_Interface_Contact_Info2" xmlns:tp="http://telepathy.freedesktop.org/wiki/DbusSpec#extensions-v0">
  <tp:copyright> Copyright (C) 2005, 2006 Collabora Limited </tp:copyright>
  <tp:copyright> Copyright (C) 2005, 2006 Nokia Corporation </tp:copyright>
  <tp:copyright> Copyright (C) 2006 INdT </tp:copyright>
  <tp:license xmlns="http://www.w3.org/1999/xhtml">
    <p>This library is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either
version 2.1 of the License, or (at your option) any later version.</p>

<p>This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
Lesser General Public License for more details.</p>

<p>You should have received a copy of the GNU Lesser General Public
License along with this library; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</p>
  </tp:license>
  <interface name="org.freedesktop.Telepathy.Connection.Interface.ContactInfo2">
    <tp:requires interface="org.freedesktop.Telepathy.Connection"/>

    <tp:struct name="Contact_Info_Field" array-name="Contact_Info_Field_List">
      <tp:docstring>
        Represents one piece of information about a contact, as modelled by a
        single vCard field.
      </tp:docstring>
      <tp:member type="s" name="Field_Name">
        <tp:docstring>
          The name of the field; this is the lowercased name of a vCard field.
          For example, a field representing a contact's address would be named
          "adr".
        </tp:docstring>
      </tp:member>
      <tp:member type="as" name="Field_Flags">
        <tp:docstring>
          A list of vCard field types applicable to this field.  For example, a
          contact's preferred home address would have flags 'home' and 'pref'.
        </tp:docstring>
      </tp:member>
      <tp:member type="as" name="Field_Value">
        <tp:docstring>
          For unstructured vCard fields (such as 'fn', a formatted name field), a
          single-element array containing the field's value; for structured
          fields (such as 'adr', an address field), an array corresponding to
          the semicolon-separated elements of the field.  A vCard field with
          multiple comma-separated values should be represented by several
          <tp:type>Contact_Info_Field</tp:type>s.
        </tp:docstring>
      </tp:member>
    </tp:struct>

    <signal name="GotContactInfo" tp:name-for-bindings="Got_Contact_Info">
      <arg name="Contact" type="u" tp:type="Contact_Handle">
        <tp:docstring>
          An integer handle of the contact ID on the server.
        </tp:docstring>
      </arg>
      <arg name="ContactInfo" type="a(sasas)" tp:type="Contact_Info_Field[]">
        <tp:docstring xmlns="http://www.w3.org/1999/xhtml">
          An array of fields representing information about this contact.
        </tp:docstring>
      </arg>
      <tp:docstring>
        Emitted when information has been received from the server with
        the details of a particular contact.
      </tp:docstring>
    </signal>
    <method name="RequestAllContactInfo"
      tp:name-for-bindings="Request_All_Contact_Info">
      <arg direction="in" name="Contact" type="u" tp:type="Contact_Handle">
        <tp:docstring>
          An integer handle for the contact to request info for.
        </tp:docstring>
      </arg>
      <tp:docstring>
        Request information of a given contact. The function will return
        after GotContactInfo signal has been emitted with avialable data
	for each contact, or an error returned. 
      </tp:docstring>
      <tp:possible-errors>
        <tp:error name="org.freedesktop.Telepathy.Error.Disconnected"/>
        <tp:error name="org.freedesktop.Telepathy.Error.NetworkError"/>
        <tp:error name="org.freedesktop.Telepathy.Error.InvalidHandle"/>
        <tp:error name="org.freedesktop.Telepathy.Error.PermissionDenied"/>
        <tp:error name="org.freedesktop.Telepathy.Error.NotAvailable"/>
      </tp:possible-errors>
    </method>
    <method name="RequestContactInfo"
      tp:name-for-bindings="Request_Contact_Info">
      <arg direction="in" name="Contact" type="u" tp:type="Contact_Handle">
        <tp:docstring>
          An integer handle for the contact to request info for.
        </tp:docstring>
      </arg>
      <arg direction="in" name="FieldName" type="s">
        <tp:docstring>
	  vCard field name.
        </tp:docstring>
      </arg>
      <tp:docstring>
        Request information for a given contact, only fields with a given
	name are returned by a GotContactInfo signal before function returns.
      </tp:docstring>
      <tp:possible-errors>
        <tp:error name="org.freedesktop.Telepathy.Error.Disconnected"/>
        <tp:error name="org.freedesktop.Telepathy.Error.NetworkError"/>
        <tp:error name="org.freedesktop.Telepathy.Error.InvalidHandle"/>
        <tp:error name="org.freedesktop.Telepathy.Error.PermissionDenied"/>
        <tp:error name="org.freedesktop.Telepathy.Error.NotAvailable"/>
      </tp:possible-errors>
    </method>
    <method name="SetContactInfo" tp:name-for-bindings="Set_Contact_Info">
      <tp:docstring>
        Set new contact information for this connection, replacing existing
        information.
      </tp:docstring>
      <arg direction="in" name="ContactInfo" type="a(sasas)"
        tp:type="Contact_Info_Field[]">
        <tp:docstring>
          The new information to be set.
        </tp:docstring>
      </arg>
      <tp:possible-errors>
        <tp:error name="org.freedesktop.Telepathy.Error.Disconnected"/>
        <tp:error name="org.freedesktop.Telepathy.Error.NetworkError"/>
        <tp:error name="org.freedesktop.Telepathy.Error.InvalidHandle"/>
        <tp:error name="org.freedesktop.Telepathy.Error.PermissionDenied"/>
        <tp:error name="org.freedesktop.Telepathy.Error.NotAvailable"/>
      </tp:possible-errors>
    </method>

    <tp:docstring xmlns="http://www.w3.org/1999/xhtml">
      <p>An interface for requesting information about a contact on a given
    connection. Information is returned as a list of fields, where
    each fields represented by a triple with a field name, field type
    modifiers and field value.</p>

      <p>The set of well-known field names is as follows:</p>
      <dl>
	<dt>fn</dt><dd></dd>
	<dt>family-name</dt><dd></dd>
	<dt>given-name</dt><dd></dd>
	<dt>additional-names</dt><dd></dd>
	<dt>honorific-prefixes</dt><dd>?</dd>
	<dt>honorific-suffixes</dt><dd>?</dd>
	<dt>nickname</dt><dd></dd>
	<dt>bday</dt><dd></dd>
	<dt>tel</dt><dd></dd>
	<dt>email</dt><dd></dd>
	<dt>geo</dt><dd></dd>
	<dt>title</dt><dd></dd>
	<dt>role</dt><dd></dd>
	<dt>org</dt><dd></dd>
	<dt>note</dt><dd></dd>
	<dt>url</dt><dd></dd>
	<dt>post-office</dt><dd></dd>
	<dt>extended-address</dt><dd></dd>
	<dt>street-address</dt><dd></dd>
	<dt>locality</dt><dd></dd>
	<dt>region</dt><dd></dd>
	<dt>postal-code</dt><dd></dd>
	<dt>country</dt><dd></dd>
      </dl>
    </tp:docstring>
  </interface>
</node>
<!-- vim:set sw=2 sts=2 et ft=xml: -->
