<?xml version="1.0" ?>
<node name="/Call_Content_Codec_Offer_Interface_RTCP_Feedback" xmlns:tp="http://telepathy.freedesktop.org/wiki/DbusSpec#extensions-v0">
  <tp:copyright> Copyright © 2005-2010 Nokia Corporation </tp:copyright>
  <tp:copyright> Copyright © 2005-2010 Collabora Ltd </tp:copyright>
  <tp:license xmlns="http://www.w3.org/1999/xhtml">
This library is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either
version 2.1 of the License, or (at your option) any later version.

This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public
License along with this library; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
  </tp:license>

  <interface name="org.freedesktop.Telepathy.Call.Content.CodecOffer.Interface.RTCPFeedback.DRAFT"
    tp:causes-havoc="experimental">
    <tp:added version="0.21.UNRELEASED">(draft version, not API-stable)</tp:added>
    <tp:requires interface="org.freedesktop.Telepathy.Call.Content.CodecOffer.DRAFT"/>

    <tp:docstring xmlns="http://www.w3.org/1999/xhtml">
      <p>This codec offer interface provides a method of signalling
        support for RTCP feedback, documented by <em>Extended RTP
        Profile for Real-time Transport Control Protocol (RTCP)-Based
        Feedback (RTP/AVPF)</em> (RFC 4585).</p>

      <p>Handlers should call
        <tp:member-ref>SetLocalFeedbackCodecs</tp:member-ref> just
        before calling <tp:dbus-ref
        namespace="ofdT.Call.Content">CodecOffer.DRAFT.Accept</tp:dbus-ref>.
        The codec identifiers used in
        <tp:member-ref>SetLocalFeedbackCodecs</tp:member-ref> should
        refer to the codecs used as <tp:dbus-ref
        namespace="ofdT.Call.Content.CodecOffer.DRAFT">Accept</tp:dbus-ref>'s
        arguments.
      </p>

      <p>If the remote contact codecs are already known (by examining
        the <tp:dbus-ref
        namespace="ofdT.Call.Content">CodecOffer.DRAFT.RemoteContactCodecMap</tp:dbus-ref>
        property) and the codec offer has the <tp:dbus-ref
        namespace="ofdT.Call.Content.CodecOffer.Interface">RTCPFeedback.DRAFT</tp:dbus-ref>
        interface, then the
        <tp:member-ref>RemoteFeedbackCodecs</tp:member-ref> property
        may contain useful details about what feedback parameters the
        remote contact supports.</p>

      <p>For more details on what RTCP Feedback can do and how to use
        it, one should refer to
        <a href="http://www.faqs.org/rfcs/rfc4585.html">RFC 4585</a>.</p>

    </tp:docstring>

    <method name="SetLocalFeedbackCodecs"
      tp:name-for-bindings="Set_Local_Feedback_Codecs">
      <arg name="Ack_Codecs" direction="in" type="a{uu}"
        tp:type="RTCP_Feedback_Codec">
        <tp:docstring>
          Codecs with positive acknowledgements for feedback.
        </tp:docstring>
      </arg>
      <arg name="Nack_Codecs" direction="in" type="a{uu}"
        tp:type="RTCP_Feedback_Codec">
        <tp:docstring>
          Codecs with negative acknowledgements for feedback.
        </tp:docstring>
      </arg>
      <tp:docstring>
        Sets the <tp:member-ref>LocalFeedbackCodecs</tp:member-ref>
        property. This method should be called just before calling
        <tp:dbus-ref
        namespace="ofdT.Call.Content">CodecOffer.DRAFT.Accept</tp:dbus-ref>
        and should refer to the codecs used as the argument to said
        function.
      </tp:docstring>
    </method>

    <tp:struct name="RTCP_Feedback_Codec_Parameters">
      <tp:docstring>
        A struct containing lists of codecs with both positive and
        negative acknowledgements for feedback.
      </tp:docstring>
      <tp:member type="a{uu}" name="Ack_Feedback_Feedbacks">
        <tp:docstring>
          Codecs with positive acknowledgements for feedback.
        </tp:docstring>
      </tp:member>
      <tp:member type="a{uu}" name="Nack_Feedback_Feedbacks">
        <tp:docstring>
          Codecs with negative acknowledgements for feedback.
        </tp:docstring>
      </tp:member>
    </tp:struct>

    <tp:mapping name="RTCP_Feedback_Codec">
      <tp:docstring>
        A codec and its feedback parameters.
      </tp:docstring>
      <tp:member type="u" name="Codec_Identifier">
        <tp:docstring>
           Numeric identifier for the codec. This will be used as the
           PT in the SDP or content description.
        </tp:docstring>
      </tp:member>
      <tp:member type="u" tp:type="RTCP_Feedback_Parameters"
        name="Parameters">
        <tp:docstring>
          The RTCP feedback parameters for this codec. There can be
          zero or more parameters set for each codec.
        </tp:docstring>
      </tp:member>
    </tp:mapping>

    <property name="LocalFeedbackCodecs" type="(a{uu}a{uu})"
      tp:type="RTCP_Feedback_Codec_Parameters"
      access="read" tp:name-for-bindings="Local_Feedback_Codecs">
      <tp:docstring>
        A list of local codecs with both positive and negative
        acknowledgements for feedback which have been set using the
        <tp:member-ref>SetLocalFeedbackCodecs</tp:member-ref> method.
      </tp:docstring>
    </property>

    <property name="RemoteFeedbackCodecs" type="(a{uu}a{uu})"
      tp:type="RTCP_Feedback_Codec_Parameters"
      access="read" tp:name-for-bindings="Remote_Feedback_Codecs">
      <tp:docstring>
        A list of remote codecs with both positive and negative
        acknowledgements for feedback which have been set by the CM.
      </tp:docstring>
    </property>

    <tp:flags name="RTCP_Feedback_Parameters" type="u">
      <tp:flag suffix="PLI" value="1">
        <tp:docstring>
          Picture Loss Indication (only available on "ack" feedback type).
        </tp:docstring>
      </tp:flag>
      <tp:flag suffix="SLI" value="2">
        <tp:docstring>
          Slice Loss Indication (only available on "ack" feedback type).
        </tp:docstring>
      </tp:flag>
      <tp:flag suffix="RPSI" value="4">
        <tp:docstring>
          Reference Picture Selection Indication feedback.
        </tp:docstring>
      </tp:flag>
      <tp:flag suffix="App" value="8">
        <tp:docstring>
          Application layer feedback.
        </tp:docstring>
      </tp:flag>
    </tp:flags>

  </interface>
</node>
<!-- vim:set sw=2 sts=2 et ft=xml: -->
