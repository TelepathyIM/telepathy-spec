<?xml version="1.0" ?>
<node name="/Call_Content_Codec_Offer_Interface_RTCP_Extended_Reports" xmlns:tp="http://telepathy.freedesktop.org/wiki/DbusSpec#extensions-v0">
  <tp:copyright> Copyright © 2005-2010 Nokia Corporation </tp:copyright>
  <tp:copyright> Copyright © 2005-2010 Collabora Ltd </tp:copyright>
  <tp:license xmlns="http://www.w3.org/1999/xhtml">
This library is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either
version 2.1 of the License, or (at your option) any later version.

This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public
License along with this library; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
  </tp:license>

  <interface name="org.freedesktop.Telepathy.Call.Content.CodecOffer.Interface.RTCPExtendedReports.DRAFT"
    tp:causes-havoc="experimental">
    <tp:added version="0.21.UNRELEASED">(draft version, not API-stable)</tp:added>
    <tp:requires interface="org.freedesktop.Telepathy.Call.Content.CodecOffer.DRAFT"/>

    <tp:docstring xmlns="http://www.w3.org/1999/xhtml">
      <p>This codec offer interface provides a method of signalling for
        RTCP extended reports, documented by <em>RTP Control Protocol
        Extended Reports (RTCP XR)</em> (RFC 3611).</p>

      <p>Handlers should call
        <tp:member-ref>SetLocalXRParameters</tp:member-ref> just
        before calling <tp:dbus-ref
        namespace="ofdT.Call.Content">CodecOffer.DRAFT.Accept</tp:dbus-ref>.</p>

      <p>If the remote contact codecs are already known (by examining
        the <tp:dbus-ref
        namespace="ofdT.Call.Content">CodecOffer.DRAFT.RemoteContactCodecMap</tp:dbus-ref>
        property) and the codec offer has the <tp:dbus-ref
        namespace="ofdT.Call.Content.CodecOffer.Interface">RTCPExtendedReports.DRAFT</tp:dbus-ref>
        interface, then the
        <tp:member-ref>RemoteXRParameters</tp:member-ref> property
        may contain useful details about what extended reports the
        remote contact supports.</p>

      <p>For more details on what RTCP extended reports can do and how
        to use them, one should refer to
        <a href="http://www.faqs.org/rfcs/rfc3611.html">RFC 3611</a>.</p>

    </tp:docstring>

    <method name="SetLocalXRParameters"
      tp:name-for-bindings="Set_Local_XR_Parameters">
      <arg direction="in" type="u" tp:type="RTCP_XR_Parameters"
        name="Parameters">
        <tp:docstring>
          The extended report parameters to set.
        </tp:docstring>
      </arg>
      <arg direction="in" type="u" name="Loss_RLE_Max_Size">
        <tp:docstring>
          If the <tp:type>RTCP_XR_Parameters</tp:type>_Loss_RLE flag
          is set on Parameters, then this argument can be set to
          specify the largest size the whole report block SHOULD have.
          Use 0 to not specify a max size.
        </tp:docstring>
      </arg>
      <arg direction="in" type="u" name="Duplicate_RLE_Max_Size">
        <tp:docstring>
          If the <tp:type>RTCP_XR_Parameters</tp:type>_Duplicate_RLE flag
          is set on Parameters, then this argument can be set to
          specify the largest size the whole report block SHOULD have.
          Use 0 to not specify a max size.
        </tp:docstring>
      </arg>
      <arg direction="in" type="u" name="Packet_Receipt_Times_Max_Size">
        <tp:docstring>
          If the <tp:type>RTCP_XR_Parameters</tp:type>_Packet_Receipt_Times flag
          is set on Parameters, then this argument can be set to
          specify the largest size the whole report block SHOULD have.
          Use 0 to not specify a max size.
        </tp:docstring>
      </arg>
      <arg direction="in" type="u" name="RTT_Max_Size">
        <tp:docstring>
          If the <tp:type>RTCP_XR_Parameters</tp:type>_RTT flag is set
          on Parameters, then this argument can be set to specify the
          largest size any DLRR report block sent SHOULD have. Use 0
          to not specify a max size.
        </tp:docstring>
      </arg>
      <arg direction="in" type="u" tp:type="RCPT_XR_RTT_Mode"
        name="RTT_Mode">
        <tp:docstring>
          If the <tp:type>RTCP_XR_Parameters</tp:type>_RTT flag is set
          on Parameters, then this argument specifies a RTT mode
          value.
        </tp:docstring>
      </arg>
      <arg direction="in" type="u" tp:type="RTCP_XR_Statistics_Flags"
        name="Statistics_Flags">
        <tp:docstring>
          If the
          <tp:type>RTCP_XR_Parameters</tp:type>_Statistics_Summary
          flag is set on Parameters, then this argument specifies the
          fields which SHOULD be included in the statistics summary
          report blocks that are sent. There can be one or more flags
          set.
        </tp:docstring>
      </arg>

      <tp:possible-errors>
        <tp:error name="org.freedesktop.Telepathy.Error.InvalidArgument"/>
      </tp:possible-errors>
    </method>

    <tp:struct name="RTCP_XR_Parameters_And_Values">
      <tp:docstring>
        A list of RTCP extended report parameters and their values.
      </tp:docstring>
      <tp:member type="u" tp:type="RTCP_XR_Parameters"
        name="Parameters">
        <tp:docstring>
          The extended report parameters to set.
        </tp:docstring>
      </tp:member>
      <tp:member type="u" name="Loss_RLE_Max_Size">
        <tp:docstring>
          If the <tp:type>RTCP_XR_Parameters</tp:type>_Loss_RLE flag
          is set on Parameters, then this member is used to specify
          the largest size the whole report block SHOULD have.  0 is
          used to not specify a max size.
        </tp:docstring>
      </tp:member>
      <tp:member type="u" name="Duplicate_RLE_Max_Size">
        <tp:docstring>
          If the <tp:type>RTCP_XR_Parameters</tp:type>_Duplicate_RLE
          flag is set on Parameters, then this member is used to
          specify the largest size the whole report block SHOULD have.
          0 is used to not specify a max size.
        </tp:docstring>
      </tp:member>
      <tp:member type="u" name="Packet_Receipt_Times_Max_Size">
        <tp:docstring>
          If the
          <tp:type>RTCP_XR_Parameters</tp:type>_Packet_Receipt_Times
          flag is set on Parameters, then this member is used to
          specify the largest size the whole report block SHOULD have.
          0 is used to not specify a max size.
        </tp:docstring>
      </tp:member>
      <tp:member type="u" name="RTT_Max_Size">
        <tp:docstring>
          If the <tp:type>RTCP_XR_Parameters</tp:type>_RTT flag is set
          on Parameters, then this member is used to specify the
          largest size any DLRR report block sent SHOULD have. 0 is
          used to not specify a max size.
        </tp:docstring>
      </tp:member>
      <tp:member type="u" tp:type="RCPT_XR_RTT_Mode"
        name="RTT_Mode">
        <tp:docstring>
          If the <tp:type>RTCP_XR_Parameters</tp:type>_RTT flag is set
          on Parameters, then this member specifies a RTT mode value.
        </tp:docstring>
      </tp:member>
      <tp:member type="u" tp:type="RTCP_XR_Statistics_Flags"
        name="Statistics_Flags">
        <tp:docstring>
          If the
          <tp:type>RTCP_XR_Parameters</tp:type>_Statistics_Summary
          flag is set on Parameters, then this member specifies the
          fields which SHOULD be included in the statistics summary
          report blocks that are sent. There can be one or more flags
          set.
        </tp:docstring>
      </tp:member>
    </tp:struct>

    <property name="LocalXRParameters" type="(uuuuuuu)"
      tp:type="RTCP_XR_Parameters_And_Values"
      access="read" tp:name-for-bindings="Local_XR_Parameters">
      <tp:docstring>
        A list of local extended report parameters which have been set
        using the
        <tp:member-ref>SetLocalXRParameters</tp:member-ref> method.
      </tp:docstring>
    </property>

    <property name="RemoteXRParameters" type="(uuuuuuu)"
      tp:type="RTCP_XR_Parameters_And_Values"
      access="read" tp:name-for-bindings="Remote_XR_Parameters">
      <tp:docstring>
        A list of remote report parameters which have been set by the
        CM.
      </tp:docstring>
    </property>

    <tp:flags name="RTCP_XR_Statistics_Flags" type="u">
      <tp:flag suffix="Loss" value="1">
        <tp:docstring>
          Loss report flag.
        </tp:docstring>
      </tp:flag>
      <tp:flag suffix="Duplicate" value="2">
        <tp:docstring>
          Duplicate report flag.
        </tp:docstring>
      </tp:flag>
      <tp:flag suffix="Jitter" value="4">
        <tp:docstring>
          Jitter flag.
        </tp:docstring>
      </tp:flag>
      <tp:flag suffix="TTL" value="8">
        <tp:docstring>
          TTL or Hop Limit flag.
        </tp:docstring>
      </tp:flag>
      <tp:flag suffix="HL" value="16">
        <tp:docstring>
          TTL or Hop Limit flag.
        </tp:docstring>
      </tp:flag>
    </tp:flags>

    <tp:flags name="RTCP_XR_Parameters" type="u">
      <tp:flag suffix="Loss_RLE" value="1">
        <tp:docstring>
          Loss RLE Report Block.
        </tp:docstring>
      </tp:flag>
      <tp:flag suffix="Duplicate_RLE" value="2">
        <tp:docstring>
          Duplicate RLE Report Block.
        </tp:docstring>
      </tp:flag>
      <tp:flag suffix="Packet_Receipt_Times" value="4">
        <tp:docstring>
          Packet Receipt Times Report Block.
        </tp:docstring>
      </tp:flag>
      <tp:flag suffix="RTT" value="8">
        <tp:docstring>
          Round Trip Time Report Block.
        </tp:docstring>
      </tp:flag>
      <tp:flag suffix="Statistics_Summary" value="16">
        <tp:docstring>
          Statistics Summary Report Block.
        </tp:docstring>
      </tp:flag>
      <tp:flag suffix="Voip_Metrics" value="32">
        <tp:docstring>
          VoIP Metrics Report Block.
        </tp:docstring>
      </tp:flag>
    </tp:flags>

    <tp:enum name="RCPT_XR_RTT_Mode" type="u">
      <tp:enumvalue suffix="All" value="0">
        <tp:docstring>
          Both RTP data senders and data receivers MAY send DLRR
          blocks.
        </tp:docstring>
      </tp:enumvalue>
      <tp:enumvalue suffix="Sender" value="1">
        <tp:docstring>
          Only active RTP senders MAY send DLRR blocks, i.e., non RTP
          senders SHALL NOT send DLRR blocks.
        </tp:docstring>
      </tp:enumvalue>
    </tp:enum>

  </interface>
</node>
<!-- vim:set sw=2 sts=2 et ft=xml: -->
